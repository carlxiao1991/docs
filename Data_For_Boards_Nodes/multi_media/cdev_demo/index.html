<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Data_For_Boards_Nodes/multi_media/cdev_demo" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">3.4.2 参考示例（C++） | Meshnology DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/docs/Data_For_Boards_Nodes/multi_media/cdev_demo"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="3.4.2 参考示例（C++） | Meshnology DOC"><meta data-rh="true" name="description" content="本章节介绍多媒体库开发的多种功能示例，包括摄像头图像采集、视频编解码、视频显示、算法推理等功能。"><meta data-rh="true" property="og:description" content="本章节介绍多媒体库开发的多种功能示例，包括摄像头图像采集、视频编解码、视频显示、算法推理等功能。"><link data-rh="true" rel="icon" href="/docs/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/docs/Data_For_Boards_Nodes/multi_media/cdev_demo"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/docs/Data_For_Boards_Nodes/multi_media/cdev_demo" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/docs/Data_For_Boards_Nodes/multi_media/cdev_demo" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.c60d9ce6.css">
<script src="/docs/assets/js/runtime~main.12dbdee3.js" defer="defer"></script>
<script src="/docs/assets/js/main.c69b9984.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/logo.png" alt="My Site Logo" class="themedComponent__dKv themedComponent--light_rzkv"><img src="/docs/img/logo.png" alt="My Site Logo" class="themedComponent__dKv themedComponent--dark_mMAk"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Meshnology_Wiki_Code_Lab">Start</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/meshnology/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Meshnology_Wiki_Code_Lab">Meshnology Wiki &amp; Code Lab</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Welcome/">1. Welcome</a><button aria-label="Expand sidebar category &#x27;1. Welcome&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/System_configuration">2. N30 Series For LoRa</a><button aria-label="Expand sidebar category &#x27;2. N30 Series For LoRa&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/Basic_Application">3 Data For Boards &amp; Nodes</a><button aria-label="Collapse sidebar category &#x27;3 Data For Boards &amp; Nodes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Data_For_Boards_Nodes/Heltec_wifi_LoRa_v3_node/Introduction">3.1 Heltec WiFi &amp; LoRa V3 Node</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Data_For_Boards_Nodes/RAK_Wisblock_RAK19007/audio_board_x3">3.2 RAK WisBlock RAK19007</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Data_For_Boards_Nodes/D-robotics_RDK_X5/40pin_define">3.3 D-Robotics RDK X5</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Data_For_Boards_Nodes/multi_media/pydev_vio_demo">3.4 Others</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Data_For_Boards_Nodes/multi_media/pydev_vio_demo">3.4.1 参考示例（python）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo">3.4.2 参考示例（C++）</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Data_For_Boards_Nodes/multi_media/multi_media_api/pydev_multimedia_api_x3/">3.4.3 Multimedia Interface Usage Instructions</a></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Basic_Development">4. Code Lab - Demos For Boards &amp; Nodes</a><button aria-label="Expand sidebar category &#x27;4. Code Lab - Demos For Boards &amp; Nodes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/FAQ">5. Templates</a><button aria-label="Expand sidebar category &#x27;5. Templates&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Appendix">6. Appendix</a><button aria-label="Expand sidebar category &#x27;6. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/Basic_Application"><span itemprop="name">3 Data For Boards &amp; Nodes</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">3.4 Others</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">3.4.2 参考示例（C++）</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>3.4.2 参考示例（C++）</h1>
<p>本章节介绍多媒体库开发的多种功能示例，包括摄像头图像采集、视频编解码、视频显示、算法推理等功能。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="摄像头图像采集和显示">摄像头图像采集和显示<a class="hash-link" aria-label="Direct link to 摄像头图像采集和显示" title="Direct link to 摄像头图像采集和显示" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像采集和显示">​</a></h2>
<p>本示例<code>vio2display</code>示例实现了<code>MIPI</code>摄像头图像采集功能，并通过<code>HDMI</code>接口输出，用户可通过显示器预览画面。</p>
<p>示例流程框图如下：
<img decoding="async" loading="lazy" alt="image-vio_to_display" src="/docs/assets/images/image-vio_to_display-c872ce929f87ba158322c3335de8e002.jpg" width="1280" height="925" class="img_ev3q"></p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>开发板断电状态下，将<code>MIPI</code>摄像头接入开发板，连接方法可参考-<a href="https://developer.d-robotics.cc/rdk_doc/Quick_start/hardware_introduction/rdk_x3#mipi_port" target="_blank" rel="noopener noreferrer">硬件简介-MIPI接口</a></li>
<li>通过HDMI线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong>
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/vio2display</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio2display$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio2display$ sudo ./vio2display -w 1920 -h 1080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<ul>
<li>-w: sensor输出宽度</li>
<li>-h: sensor输出高度</li>
</ul>
</li>
<li>
<p><strong>预期效果：</strong>
程序正确运行后，开发板会通过显示器输出<code>MIPI</code>摄像头采集的实时画面。运行log如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  sunrise@ubuntu:/tmp/nfs/sp_cdev/cdev_demo/vio2display$ ./vio2display -w 1920 -h 1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  disp_w=1920, disp_h=1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2023/03/28 02:08:03.359 !INFO [x3_cam_init_param][0099]Enable mipi host0 mclk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2023/03/28 02:08:03.359 !INFO [x3_cam_init_param][0099]Enable mipi host1 mclk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Camera: gpio_num=114, active=low, i2c_bus=3, mipi_host=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Camera: gpio_num=114, active=low, i2c_bus=1, mipi_host=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Camera: gpio_num=114, active=low, i2c_bus=0, mipi_host=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Camera 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enable: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i2c_bus: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mipi_host: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Camera 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enable: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i2c_bus: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mipi_host: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Camera 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enable: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i2c_bus: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mipi_host: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cmd=i2ctransfer -y -f 3 w2@0x10 0x0 0x0 r1 2&gt;&amp;1, result=0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Found sensor:imx219 on i2c bus 3, use mipi host 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Setting VPS channel-2: src_w:1920, src_h:1080; dst_w:1920, dst_h:1080;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Setting VPS channel-1: src_w:1920, src_h:1080; dst_w:1920, dst_h:1080;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sp_open_camera success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libiar: hb_disp_set_timing done!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Press &#x27;q&#x27; to Exit !</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="摄像头图像本地保存-rdk-x3">摄像头图像本地保存 (RDK X3)<a class="hash-link" aria-label="Direct link to 摄像头图像本地保存 (RDK X3)" title="Direct link to 摄像头图像本地保存 (RDK X3)" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像本地保存-rdk-x3">​</a></h2>
<p>本示例<code>vio_capture</code>示例实现了<code>MIPI</code>摄像头图像采集，并将<code>RAW</code>和<code>YUV</code>两种格式的图像本地保存的功能。示例流程框图如下：
<img decoding="async" loading="lazy" alt="image-capture" src="/docs/assets/images/image-capture-9be5a7688731716a1100fae6159178ab.jpg" width="1920" height="1365" class="img_ev3q"></p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>开发板断电状态下，将<code>MIPI</code>摄像头接入开发板，连接方法可参考-<a href="https://developer.d-robotics.cc/rdk_doc/Quick_start/hardware_introduction/rdk_x3#mipi_port" target="_blank" rel="noopener noreferrer">硬件简介-MIPI接口</a></li>
<li>通过HDMI线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong>
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/vio_capture/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio_capture$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio_capture$ sudo ./capture -b 12 -c 10 -h 1080 -w 1920</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<ul>
<li>-b: RAW图bit数，IMX477：12，others：10</li>
<li>-c: 保存图像的数量</li>
<li>-w: 保存图像的宽度</li>
<li>-h: 保存图像的高度</li>
</ul>
</li>
<li>
<p><strong>预期效果：</strong>
程序正确运行后，当前目录保存指定数量的图片文件，<code>RAW</code>格式以<code>raw_*.raw</code>方式命名，<code>YUV</code>格式以<code>yuv_*.yuv</code>方式命名。运行log如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio_capture$ sudo ./capture -b 12 -c 10 -h 1080 -w 1920</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Setting VPS channel-2: src_w:1920, src_h:1080; dst_w:1920, dst_h:1080;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Setting VPS channel-1: src_w:1920, src_h:1080; dst_w:1920, dst_h:1080;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jiale:start streaming...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sensor_name imx477, setting_size = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  701.213210]hb_isp_algo_stop@main_user.c:389 GENERIC(ERR) :g_mutex destroy.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="摄像头图像本地保存-rdk-x5">摄像头图像本地保存 (RDK X5)<a class="hash-link" aria-label="Direct link to 摄像头图像本地保存 (RDK X5)" title="Direct link to 摄像头图像本地保存 (RDK X5)" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像本地保存-rdk-x5">​</a></h2>
<p>本示例<code>vio_capture</code>示例实现了<code>MIPI</code>摄像头图像采集，并将<code>RAW</code>和<code>YUV</code>两种格式的图像本地保存的功能。示例流程框图如下：
<img decoding="async" loading="lazy" alt="image-capture" src="/docs/assets/images/image-capture-9be5a7688731716a1100fae6159178ab.jpg" width="1920" height="1365" class="img_ev3q"></p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>开发板断电状态下，将 <code>MIPI</code> 摄像头接入开发板，连接方法可参考 -<a href="https://developer.d-robotics.cc/rdk_doc/Quick_start/hardware_introduction/rdk_x3#mipi_port" target="_blank" rel="noopener noreferrer">硬件简介-MIPI接口</a></li>
<li>通过 HDMI 线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong>
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/vio_capture/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio_capture$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio_capture$ sudo ./capture -b 16 -c 10 -h 1080 -w 1920</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<ul>
<li>-b:  RAW图bit数，IMX219 / IMX477 / OV5647 都设置为 16，只有极少数 Camera Sensor 需要设置为 8</li>
<li>-c: 保存图像的数量</li>
<li>-w: 保存图像的宽度</li>
<li>-h: 保存图像的高度</li>
</ul>
</li>
<li>
<p><strong>预期效果：</strong>
程序正确运行后，当前目录保存指定数量的图片文件，<code>RAW</code>格式以<code>raw_*.raw</code>方式命名，<code>YUV</code>格式以<code>yuv_*.yuv</code>方式命名。运行log如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio_capture$ sudo ./capture -b 16 -c 10 -h 1080 -w 1920</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] board_id is 301, not need skip sci1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Searching camera sensor on device: /proc/device-tree/soc/cam/vcon@0 i2c bus: 6 mipi rx phy: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO: Found sensor name:ov5647 on mipi rx csi 0, i2c addr 0x36, config_file:linear_1920x1080_raw10_30fps_2lane.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2000/01/01 08:18:54.877 !INFO [CamInitParam][0139]Setting VSE channel-0: input_width:1920, input_height:1080,  dst_w:1920, dst_h:1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2000/01/01 08:18:54.877 !INFO [CamInitParam][0139]Setting VSE channel-1: input_width:1920, input_height:1080, dst_w:1920, dst_h:1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... 省略 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp_ptr.data_size[0]:4147200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp_ptr.data_size[0]:4147200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp_ptr.data_size[0]:4147200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... 省略 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp_ptr.data_size[0]:4147200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp_ptr.data_size[0]:4147200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ov5647 sensor stop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="摄像头图像本地保存-rdk-ultra">摄像头图像本地保存 (RDK Ultra)<a class="hash-link" aria-label="Direct link to 摄像头图像本地保存 (RDK Ultra)" title="Direct link to 摄像头图像本地保存 (RDK Ultra)" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像本地保存-rdk-ultra">​</a></h2>
<p>本示例<code>vio_capture</code>示例实现了<code>MIPI</code>摄像头图像采集，并提供<code>RAW</code>和<code>YUV</code>两种格式的图像本地保存的功能（两者互斥）。示例流程框图如下：
<img decoding="async" loading="lazy" alt="image-capture" src="/docs/assets/images/image-capture-105e9e82cfdfa2101b0b9bd99545d0a2.png" width="380" height="390" class="img_ev3q"></p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>开发板断电状态下，将<code>MIPI</code>摄像头接入开发板，连接方法可参考-<a href="https://developer.d-robotics.cc/rdk_doc/Quick_start/hardware_introduction/rdk_x3#mipi_port" target="_blank" rel="noopener noreferrer">硬件简介-MIPI接口</a></li>
<li>通过HDMI线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
<li><strong>如果需要获取raw数据，请先按照以下步骤进行配置</strong>：<!-- -->
<ul>
<li>编辑摄像头对应的配置文件，以<code>IMX219</code>为例，编辑<code>/etc/camera_configs/Ultra/imx219/1080/vpm.json</code></li>
<li>将<code>isp_dma_output_format</code>字段修改成<code>4</code>，保存更改</li>
</ul>
</li>
<li><strong>如果需要获取<code>NV12</code>格式的图片，请先按照以下步骤进行配置</strong>：<!-- -->
<ul>
<li>编辑摄像头对应的配置文件，以<code>IMX219</code>为例，编辑<code>/etc/camera_configs/Ultra/imx219/1080/vpm.json</code></li>
<li>将<code>isp_stream_output_format</code>字段修改为<code>0</code>；将<code>isp_dma_output_format</code>字段修改为<code>9</code>；将<code>pym_mode</code>字段修改为<code>0</code>；保存更改</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong>
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/vio_capture/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio_capture$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio_capture$ sudo ./capture -b 12 -c 10 -h 1080 -w 1920 -m 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<ul>
<li>-b: RAW图bit数，目前都是<strong>12</strong></li>
<li>-c: 保存图像的数量</li>
<li>-w: 保存图像的宽度</li>
<li>-h: 保存图像的高度</li>
<li>-m: 保存图像的类型，0<!-- -->:yuv<!-- -->，1<!-- -->:raw</li>
</ul>
</li>
<li>
<p><strong>预期效果：</strong>
程序正确运行后，当前目录保存指定数量的图片文件，<code>RAW</code>格式以<code>raw_*.raw</code>方式命名，<code>YUV</code>格式以<code>yuv_*.yuv</code>方式命名。运行log如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:/app/cdev_demo/media_cdev/vio_capture# sudo ./capture -b 12 -c 10 -h 1080 -w 1920 -m 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera: gpio_num=432, active=low, i2c_bus=6, mipi_host=3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera: gpio_num=293, active=low, i2c_bus=5, mipi_host=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera: gpio_num=290, active=low, i2c_bus=4, mipi_host=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera: gpio_num=289, active=low, i2c_bus=2, mipi_host=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd=i2ctransfer -y -f 6 w2@0x10 0x0 0x0 r1 2&gt;&amp;1, result=0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">capture time :9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sensor_name imx219, setting_size = 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="摄像头图像采集并编码">摄像头图像采集并编码<a class="hash-link" aria-label="Direct link to 摄像头图像采集并编码" title="Direct link to 摄像头图像采集并编码" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像采集并编码">​</a></h2>
<p>本示例<code>vio2encoder</code>示例实现了 <code>MIPI</code> 摄像头图像采集功能，并编码后在本地保存，用户可通过显示器预览画面。示例流程框图如下：
<img decoding="async" loading="lazy" alt="image-vio_to_encoder" src="/docs/assets/images/image-vio_to_encoder-797ea653f7373fc69a52debf8528da00.png" width="595" height="416" class="img_ev3q"></p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>开发板断电状态下，将<code>MIPI</code>摄像头接入开发板，连接方法可参考-<a href="https://developer.d-robotics.cc/rdk_doc/Quick_start/hardware_introduction/rdk_x3#mipi_port" target="_blank" rel="noopener noreferrer">硬件简介-MIPI接口</a></li>
<li>通过HDMI线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong> 按照以下命令执行程序
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/vio2encoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio2encoder$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio2encoder$ sudo ./vio2encoder -w 1920 -h 1080 --iwidth 1920 --iheight 1080 -o stream.h264</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<ul>
<li>-w: 编码视频宽度</li>
<li>-h: 编码视频高度</li>
<li>--iwidth: sensor输出宽度</li>
<li>--iheight: sensor输出高度</li>
<li>-o: 编码输出路径</li>
</ul>
</li>
<li>
<p><strong>预期效果</strong>：
程序正确运行后，在当前目录下会生成名为<code>stream.h264</code>的视频文件。运行log如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/tmp/nfs/sp_cdev/cdev_demo/vio2encoder$ sudo ./vio2encoder -w 1920 -h 1080 --iwidth 1920 --iheight 1080 -o stream.h264</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2023/03/28 02:27:32.560 !INFO [x3_cam_init_param][0099]Enable mipi host0 mclk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2023/03/28 02:27:32.561 !INFO [x3_cam_init_param][0099]Enable mipi host1 mclk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera: gpio_num=114, active=low, i2c_bus=3, mipi_host=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera: gpio_num=114, active=low, i2c_bus=1, mipi_host=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera: gpio_num=114, active=low, i2c_bus=0, mipi_host=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     enable: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     i2c_bus: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     mipi_host: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     enable: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     i2c_bus: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     mipi_host: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Camera 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     enable: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     i2c_bus: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     mipi_host: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd=i2ctransfer -y -f 3 w2@0x10 0x0 0x0 r1 2&gt;&amp;1, result=0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Found sensor:imx219 on i2c bus 3, use mipi host 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Setting VPS channel-2: src_w:1920, src_h:1080; dst_w:1920, dst_h:1080;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Setting VPS channel-1: src_w:1920, src_h:1080; dst_w:1920, dst_h:1080;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_open_camera success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_start_encode success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_module_bind(vio -&gt; encoder) success!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="摄像头图像采集并编码-rdk-x5">摄像头图像采集并编码 (RDK X5)<a class="hash-link" aria-label="Direct link to 摄像头图像采集并编码 (RDK X5)" title="Direct link to 摄像头图像采集并编码 (RDK X5)" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像采集并编码-rdk-x5">​</a></h2>
<p>本示例<code>vio2encoder</code>示例实现了 <code>MIPI</code> 摄像头图像采集功能，并编码后在本地保存，用户可通过显示器预览画面。示例流程框图如下：
<img decoding="async" loading="lazy" alt="image-vio_to_encoder" src="/docs/assets/images/image-vio_to_encoder-b743ed0ebade0b09e69089374dfaf8c3.jpg" width="1920" height="1284" class="img_ev3q"></p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>开发板断电状态下，将 <code>MIPI</code> 摄像头接入开发板，连接方法可参考-<a href="https://developer.d-robotics.cc/rdk_doc/Quick_start/hardware_introduction/rdk_x3#mipi_port" target="_blank" rel="noopener noreferrer">硬件简介-MIPI接口</a></li>
<li>通过 HDMI 线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong> 按照以下命令执行程序
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/vio2encoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio2encoder$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vio2encoder$ sudo ./vio2encoder -w 1920 -h 1080 --iwidth 1920 --iheight 1080 -o stream.h264</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<ul>
<li>-w: 编码视频宽度</li>
<li>-h: 编码视频高度</li>
<li>--iwidth: sensor输出宽度</li>
<li>--iheight: sensor输出高度</li>
<li>-o: 编码输出路径</li>
</ul>
</li>
<li>
<p><strong>预期效果</strong>：
程序正确运行后，在当前目录下会生成名为<code>stream.h264</code>的视频文件。运行log如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/tmp/nfs/sp_cdev/cdev_demo/vio2encoder$ sudo ./vio2encoder -w 1920 -h 1080 --iwidth 1920 --iheight 1080 -o stream.h264</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] board_id is 301, not need skip sci1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Searching camera sensor on device: /proc/device-tree/soc/cam/vcon@0 i2c bus: 6 mipi rx phy: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO: Found sensor name:ov5647 on mipi rx csi 0, i2c addr 0x36, config_file:linear_1920x1080_raw10_30fps_2lane.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2000/01/01 18:43:43.374 !INFO [CamInitParam][0139]Setting VSE channel-0: input_width:1920, input_height:1080, dst_w:1920, dst_h:1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2000/01/01 18:43:43.374 !INFO [CamInitParam][0139]Setting VSE channel-1: input_width:1920, input_height:1080, dst_w:1920, dst_h:1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... 省略 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_open_camera success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2000/01/01 18:43:44.166 !INFO [vp_encode_config_param][0405]codec type is h264: frame size:3110912  frame rate: 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_start_encode success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_module_bind(vio -&gt; encoder) success!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="视频文件解码并显示">视频文件解码并显示<a class="hash-link" aria-label="Direct link to 视频文件解码并显示" title="Direct link to 视频文件解码并显示" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#视频文件解码并显示">​</a></h2>
<p>本示例<code>decoder2display</code>实现了视频文件解码，并通过<code>HDMI</code>接口输出的工，用户可通过显示器预览画面。示例流程框图如下：
<img decoding="async" loading="lazy" alt="image-decoder_to_display" src="/docs/assets/images/image-decoder_to_display-455214d9e4dc14ef3790067c3cba943b.png" width="566" height="359" class="img_ev3q"></p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>通过HDMI线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
<li>准备视频编码文件 <code>stream.h264</code> 作为输入。</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong>
示例代码以源码形式提供，需要使用 <code>make</code> 命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/decode2display</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/decode2display$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/decode2display$ sudo ./decoder2display -w 1920 -h 1080 -i stream.h264</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明：</p>
<ul>
<li>-h: 视频文件的高度</li>
<li>-w: 视频文件的宽度</li>
<li>-i: 视频文件的路径</li>
</ul>
</li>
<li>
<p><strong>预期效果：</strong>
程序正确运行后，视频画面会通过开发板的<code>HDMI</code>接口输出，用户可以通过显示器预览视频画面。运行log如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/decode2display$ sudo ./decoder2display -w 1920 -h 1080 -i stream.h264</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">disp_w=1024, disp_h=600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[x3_av_open_stream]:[380]:probesize: 5000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_start_decode success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">libiar: hb_disp_set_timing done!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_start_display success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_open_vps success!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rtsp拉流解码">RTSP拉流解码<a class="hash-link" aria-label="Direct link to RTSP拉流解码" title="Direct link to RTSP拉流解码" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#rtsp拉流解码">​</a></h2>
<p>本示例<code>rtsp2display</code>实现了拉取<code>rtsp</code>码流、解码，并通过<code>HDMI</code>输出视频图像的功能，用户可通过显示器预览画面。示例流程框图如下：
<img decoding="async" loading="lazy" alt="rtsp2display" src="/docs/assets/images/image-rtsp_to_display-61e297d388aef02fc815163312b9105b.jpg" width="1280" height="702" class="img_ev3q"></p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>
<p>通过HDMI线缆连接开发板和显示器</p>
</li>
<li>
<p>开发板上电，并通过命令行登录</p>
</li>
<li>
<p>准备<code>rtsp</code>码流作为输入源，使用系统预置的推流服务。该服务会把<code>1080P_test.h264</code>视频文件处理成 rtsp 流，url 地址为<code>rtsp://127.0.0.1/1080P_test.h264</code>。用户可通过如下命令启动推流服务：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /app/pydev_demo/08_decode_rtsp_stream/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:/app/pydev_demo/08_decode_rtsp_stream# sudo ./live555MediaServer &amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong>
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/rtsp2display</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/rtsp2display$ sudo make #可能会打印一些警告信息，无需理会</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/decode2display$ sudo ./rtsp2display -i rtsp://127.0.0.1/1080P_test.h264 -t tcp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数配置：</p>
<ul>
<li>-i: 码流url地址</li>
<li>-t: 传输类型，可选 tcp / udp</li>
</ul>
</li>
<li>
<p><strong>预期效果：</strong>
程序正确运行后，视频画面会通过开发板的<code>HDMI</code>接口输出，用户可以通过显示器预览视频画面。运行 log 如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/rtsp2display$ sudo ./rtsp2display -i rtsp://127.0.0.1/1080P_test.h264 -t tcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">avformat_open_input ok!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">avformat_find_stream_info ok!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Input #0, rtsp, from &#x27;rtsp://127.0.0.1/1080P_test.h264&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title           : H.264 Video, streamed by the LIVE555 Media Server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    comment         : 1080P_test.h264</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Duration: N/A, start: 0.040000, bitrate: N/A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Stream #0:0: Video: h264 (High), yuv420p(progressive), 1920x1080 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 90k tbn, 50 tbc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">av_dump_format ok!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rtsp_w:1920,rtsp_h:1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">display_w:1920,dispaly_h:1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... 省略 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sp_open_vps success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Created new framebuffer: fb_id=76 for dma_buf_fd=18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>注意事项：</strong></p>
<ul>
<li>使用 UDP 协议传输码流时，可能出现因网络丢包导致的花屏现象，此时可切换成 TCP 协议传输解决。</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vps-缩放示例">VPS 缩放示例<a class="hash-link" aria-label="Direct link to VPS 缩放示例" title="Direct link to VPS 缩放示例" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#vps-缩放示例">​</a></h2>
<p>本示例实现了基于视频处理模块<code>VPS</code>的视频缩放功能，用户可通过显示器预览画面。</p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>通过HDMI线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
<li>准备图像(NV12)、视频文件(H264)作为输入</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong>
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/vps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vps$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vps$ sudo ./vps -m 1 -i stream.h264 -o output.yuv --iheight 1080 --iwidth 1920 --oheight 720 --owidth 1280</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>参数配置：</strong></p>
<ul>
<li>-i: 待操作的文件路径</li>
<li>-iheight: 输入高度</li>
<li>-iwidth: 输入宽度</li>
<li>-m: 输入模式，1:视频流；2<!-- -->:NV12<!-- -->图片</li>
<li>-o: 输出路径</li>
<li>-oheight: 输出高度</li>
<li>-width: 输出宽度</li>
<li>-skip:（可选）对于视频流输入，调过开头的帧数</li>
</ul>
</li>
<li>
<p><strong>预期效果：</strong>
程序正确运行后，当前目录会保存处理后的图像文件<code>outpu.yuv</code>。运行log如下：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/vps$ sudo ./vps -m 1 -i stream.h264 -o output.yuv --iheight 1080 --iwidth 1920 --oheight 720 --owidth 1280</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... 省略 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2000/01/01 18:57:31.330 !INFO [CamInitVseParam][0231]Setting VSE channel-0: input_width:1920, input_height:1080, dst_w:1280, dst_h:720</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... 省略 ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="目标检测算法fcos">目标检测算法—fcos<a class="hash-link" aria-label="Direct link to 目标检测算法—fcos" title="Direct link to 目标检测算法—fcos" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#目标检测算法fcos">​</a></h2>
<p>本示例基于<code>fcos</code>模型，实现了本地视频流的目标检测算法功能，用户可通过显示器预览检测结果。</p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>通过HDMI线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
<li>准备视频文件(H264)作为输入</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong>
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/bpu/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/bpu/src$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/bpu/src$ cd bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/bpu/src/bin$ sudo ./sample -f /app/model/basic/fcos_512x512_nv12.bin -m 1 -i 1080p_.h264 -w 1920 -h 1080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>参数配置：</strong></p>
<ul>
<li>-f: 模型文件路径</li>
<li>-h: 输入视频的高度</li>
<li>-w: 输入视频的宽度</li>
<li>-i: 输入视频的路径</li>
<li>-m: 模型类型，默认为1</li>
</ul>
</li>
<li>
<p><strong>预期效果：</strong>
程序正确运行后，会通过<code>HDMI</code>接口输出视频和算法检测渲染后的画面，用户可通过显示器预览。运行log如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/bpu/src/bin$ sudo ./sample -f /app/model/basic/fcos_512x512_nv12.bin -m 1 -i 1080p_.h264 -w 1920 -h 1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BPU_PLAT]BPU Platform Version(1.3.1)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[HBRT] set log level as 0. version = 3.14.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DNN] Runtime version = 1.9.7_(3.14.5 HBRT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Model info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model_name: fcos_512x512_nv12Input count: 1input[0]: tensorLayout: 2 tensorType: 1 validShape:(1, 3, 512, 512, ), alignedShape:(1, 3, 512, 512, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output count: 15Output[0]: tensorLayout: 0 tensorType: 13 validShape:(1, 64, 64, 80, ), alignedShape:(1, 64, 64, 80, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[1]: tensorLayout: 0 tensorType: 13 validShape:(1, 32, 32, 80, ), alignedShape:(1, 32, 32, 80, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[2]: tensorLayout: 0 tensorType: 13 validShape:(1, 16, 16, 80, ), alignedShape:(1, 16, 16, 80, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[3]: tensorLayout: 0 tensorType: 13 validShape:(1, 8, 8, 80, ), alignedShape:(1, 8, 8, 80, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[4]: tensorLayout: 0 tensorType: 13 validShape:(1, 4, 4, 80, ), alignedShape:(1, 4, 4, 80, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[5]: tensorLayout: 0 tensorType: 13 validShape:(1, 64, 64, 4, ), alignedShape:(1, 64, 64, 4, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[6]: tensorLayout: 0 tensorType: 13 validShape:(1, 32, 32, 4, ), alignedShape:(1, 32, 32, 4, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[7]: tensorLayout: 0 tensorType: 13 validShape:(1, 16, 16, 4, ), alignedShape:(1, 16, 16, 4, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[8]: tensorLayout: 0 tensorType: 13 validShape:(1, 8, 8, 4, ), alignedShape:(1, 8, 8, 4, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[9]: tensorLayout: 0 tensorType: 13 validShape:(1, 4, 4, 4, ), alignedShape:(1, 4, 4, 4, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[10]: tensorLayout: 0 tensorType: 13 validShape:(1, 64, 64, 1, ), alignedShape:(1, 64, 64, 1, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[11]: tensorLayout: 0 tensorType: 13 validShape:(1, 32, 32, 1, ), alignedShape:(1, 32, 32, 1, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[12]: tensorLayout: 0 tensorType: 13 validShape:(1, 16, 16, 1, ), alignedShape:(1, 16, 16, 1, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[13]: tensorLayout: 0 tensorType: 13 validShape:(1, 8, 8, 1, ), alignedShape:(1, 8, 8, 1, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[14]: tensorLayout: 0 tensorType: 13 validShape:(1, 4, 4, 1, ), alignedShape:(1, 4, 4, 1, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">libiar: hb_disp_set_timing done!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dispaly init ret = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps open ret = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module bind vps &amp; display ret = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">display start ret = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[x3_av_open_stream]:[380]:probesize: 5000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">decode start ret = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module bind decoder &amp; vps ret = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ERROR][&quot;vdec&quot;][video/src/vdec_group.c:348] [8870.450264]vdec_channel_bump_thread[348]: VDEC_MODULE module try again</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[draw_rect]:[137]:========point is 0,return========</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fps:55.555556,processing time:18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="目标检测算法yolov5s">目标检测算法—YOLOv5s<a class="hash-link" aria-label="Direct link to 目标检测算法—YOLOv5s" title="Direct link to 目标检测算法—YOLOv5s" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#目标检测算法yolov5s">​</a></h2>
<p>本示例基于<code>YOLOv5</code>模型，实现了摄像头目标检测算法功能，用户可通过显示器预览检测结果。</p>
<ul>
<li>
<p><strong>环境准备：</strong></p>
<ul>
<li>开发板断电状态下，将<code>MIPI</code>摄像头接入开发板，连接方法可参考-<a href="https://developer.d-robotics.cc/rdk_doc/Quick_start/hardware_introduction/rdk_x3#mipi_port" target="_blank" rel="noopener noreferrer">硬件简介-MIPI接口</a></li>
<li>通过HDMI线缆连接开发板和显示器</li>
<li>开发板上电，并通过命令行登录</li>
</ul>
</li>
<li>
<p><strong>运行方式：</strong>
示例代码以源码形式提供，需要使用<code>make</code>命令进行编译后运行，步骤如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ cd /app/cdev_demo/bpu/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/bpu/src$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/bpu/src$ cd bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/bpu/src/bin$ sudo ./sample -f /app/model/basic/yolov5s_672x672_nv12.bin -m 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>参数配置：</strong></p>
<ul>
<li>-f: 模型的路径</li>
<li>-m: 模型类型，默认为0</li>
</ul>
</li>
<li>
<p><strong>预期效果：</strong>
程序正确运行后，会通过<code>HDMI</code>接口输出视频和算法检测渲染后的画面，用户可通过显示器预览。运行log如下：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:/app/cdev_demo/bpu/src/bin$ sudo ./sample -f /app/model/basic/yolov5s_672x672_nv12.bin -m 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BPU_PLAT]BPU Platform Version(1.3.6)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[HBRT] set log level as 0. version = 3.15.49.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DNN] Runtime version = 1.23.8_(3.15.49 HBRT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[A][DNN][packed_model.cpp:247][Model](2000-01-01,19:06:39.821.214) [HorizonRT] The model builder version = 1.23.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[W][DNN]bpu_model_info.cpp:491][Version](2000-01-01,19:06:39.876.293) Model: yolov5s_v2_672x672_bayese_nv12. Inconsistency between the hbrt library version 3.15.49.0 and the model build version 3.15.47.0 detected, in order to ensure correct model results, it is recommended to use compilation tools and the BPU SDK from the same OpenExplorer package.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Model info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model_name: yolov5s_v2_672x672_bayese_nv12Input count: 1input[0]: tensorLayout: 2 tensorType: 1 validShape:(1, 3, 672, 672, ), alignedShape:(1, 3, 672, 672, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output count: 3Output[0]: tensorLayout: 0 tensorType: 13 validShape:(1, 84, 84, 255, ), alignedShape:(1, 84, 84, 255, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[1]: tensorLayout: 0 tensorType: 13 validShape:(1, 42, 42, 255, ), alignedShape:(1, 42, 42, 255, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output[2]: tensorLayout: 0 tensorType: 13 validShape:(1, 21, 21, 255, ), alignedShape:(1, 21, 21, 255, )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] board_id is 301, not need skip sci1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Searching camera sensor on device: /proc/device-tree/soc/cam/vcon@0 i2c bus: 6 mipi rx phy: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO: Found sensor name:ov5647 on mipi rx csi 0, i2c addr 0x36, config_file:linear_1920x1080_raw10_30fps_2lane.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2000/01/01 19:06:40.012 !INFO [CamInitParam][0139]Setting VSE channel-0: input_width:1920, input_height:1080, dst_w:672, dst_h:672</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2000/01/01 19:06:40.013 !INFO [CamInitParam][0139]Setting VSE channel-1: input_width:1920, input_height:1080, dst_w:1920, dst_h:1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... 省略 ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Data_For_Boards_Nodes/multi_media/pydev_vio_demo"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3.4.1 参考示例（python）</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Data_For_Boards_Nodes/multi_media/multi_media_api/pydev_multimedia_api_x3/"><div class="pagination-nav__sublabel">Next </div><div class="pagination-nav__label">3.4.3 RDK X3/X5多媒体接口说明</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像采集和显示">摄像头图像采集和显示</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像本地保存-rdk-x3">摄像头图像本地保存 (RDK X3)</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像本地保存-rdk-x5">摄像头图像本地保存 (RDK X5)</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像本地保存-rdk-ultra">摄像头图像本地保存 (RDK Ultra)</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像采集并编码">摄像头图像采集并编码</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#摄像头图像采集并编码-rdk-x5">摄像头图像采集并编码 (RDK X5)</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#视频文件解码并显示">视频文件解码并显示</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#rtsp拉流解码">RTSP拉流解码</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#vps-缩放示例">VPS 缩放示例</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#目标检测算法fcos">目标检测算法—fcos</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/Data_For_Boards_Nodes/multi_media/cdev_demo#目标检测算法yolov5s">目标检测算法—YOLOv5s</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.meshnology.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://meshnology.com/pages/contact/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Follow Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@meshnology/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/profile.php?id=61574010301135/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/meshnology/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>